<div class="container mt-4" *ngIf="!isLoading && video as vid; else loadingTpl">

  <!-- ▶ Player -->
  <div class="ratio ratio-16x9 mb-3">
    <iframe [src]="'https://www.youtube.com/embed/' + vid.videoId | safeUrl"
            allowfullscreen title="YouTube player"></iframe>
  </div>

  <!-- Título -->
  <h4 class="video-title">{{ vid.title }}</h4>

  <!-- Canal -->
  <div class="d-flex align-items-center mb-2">
    <img [src]="channelAvatarUrl" class="rounded-circle me-3" width="40" height="40" alt="avatar">
    <div>
      <h6 class="mb-0">{{ channelName }}</h6>
      <small class="text-muted">{{ subscriberCount }}</small>
    </div>
  </div>

  <!-- Fecha · visitas -->
  <p class="text-muted mb-3">
    {{ vid.publishedAt | date:'mediumDate' }} • {{ vid.viewCount | number:'1.0-0' }} views
  </p>

  <!-- Tags -->
  <div class="mb-3" *ngIf="vid.tags?.length">
    <span class="badge bg-light text-dark me-2" *ngFor="let t of vid.tags">{{ t }}</span>
  </div>

  <!-- Descripción -->
  <p class="white-space-pre">{{ vid.description }}</p>

  <!-- Sliders -->
  <app-slider *ngIf="related.length"
              [title]="'Related videos'"
              [items]="related"
              [numVisible]="4"
              [numScroll]="1"></app-slider>

  <app-slider *ngIf="moreFromChannel.length"
              [title]="'More from ' + channelName"
              [items]="moreFromChannel"
              [numVisible]="4"
              [numScroll]="1"></app-slider>
</div>

<!-- Skeleton -->
<ng-template #loadingTpl>
  <div class="container mt-4">
    <div class="ratio ratio-16x9 skeleton mb-3"></div>
    <div class="skeleton h4 mb-2"></div>
    <div class="d-flex align-items-center mb-2">
      <div class="skeleton rounded-circle me-3" style="width:40px;height:40px"></div>
      <div class="flex-grow-1">
        <div class="skeleton mb-1" style="width:120px;height:14px"></div>
        <div class="skeleton"      style="width:80px;height:12px"></div>
      </div>
    </div>
    <div class="skeleton mb-3" style="width:180px;height:12px"></div>
    <div class="skeleton" style="height:80px;width:100%"></div>
  </div>
</ng-template>
